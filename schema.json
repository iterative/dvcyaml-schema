{
  "$defs": {
    "CustomParamFileKeys": {
      "additionalProperties": {
        "items": {
          "$ref": "#/$defs/ParamKey"
        },
        "type": "array",
        "uniqueItems": true
      },
      "title": "CustomParamFileKeys",
      "type": "object"
    },
    "DepModel": {
      "title": "DepModel",
      "type": "string"
    },
    "Dependencies": {
      "items": {
        "$ref": "#/$defs/DepModel"
      },
      "title": "Dependencies",
      "type": "array",
      "uniqueItems": true
    },
    "EmptyParamFileKeys": {
      "additionalProperties": {
        "type": "null"
      },
      "title": "EmptyParamFileKeys",
      "type": "object"
    },
    "EmptyTopLevelPlotFlags": {
      "default": null,
      "title": "EmptyTopLevelPlotFlags",
      "type": "null"
    },
    "ForeachDo": {
      "additionalProperties": false,
      "properties": {
        "foreach": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "items": {},
              "type": "array"
            },
            {
              "type": "object"
            }
          ],
          "description": "Iterable to loop through in foreach. Can be a parametrized string, list or a dict.\n\nThe stages will be generated by iterating through this data, by substituting data in the `do` block.",
          "title": "Foreach"
        },
        "do": {
          "allOf": [
            {
              "$ref": "#/$defs/Stage"
            }
          ],
          "description": "Parametrized stage definition that'll be substituted over for each of the value from the foreach data."
        }
      },
      "required": [
        "foreach",
        "do"
      ],
      "title": "ForeachDo",
      "type": "object"
    },
    "Matrix": {
      "additionalProperties": false,
      "properties": {
        "cmd": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          ],
          "description": "(Required) Command to run (anything your system terminal can run).\n\nCan be a string or a list of commands.",
          "title": "Cmd"
        },
        "wdir": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Working directory for the cmd, relative to `dvc.yaml`",
          "title": "Wdir"
        },
        "deps": {
          "oneOf": [
            {
              "$ref": "#/$defs/Dependencies"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "List of the dependencies for the stage."
        },
        "params": {
          "oneOf": [
            {
              "$ref": "#/$defs/Params"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "List of dot-separated parameter dependency keys to track from `params.yaml`.\n\nMay contain other YAML/JSON/TOML/Python parameter file names, with a sub-list of the param names to track in them (leave empty to include all)."
        },
        "outs": {
          "oneOf": [
            {
              "$ref": "#/$defs/Outs"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "List of the outputs of the stage."
        },
        "metrics": {
          "oneOf": [
            {
              "$ref": "#/$defs/Outs"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "List of metrics of the stage written to JSON/TOML/YAML."
        },
        "plots": {
          "oneOf": [
            {
              "$ref": "#/$defs/Plots"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "List of plots of the stage for visualization.\n\nPlots may be written to JSON/YAML/CSV/TSV for data or JPEG/GIF/PNG for images."
        },
        "frozen": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Assume stage as unchanged",
          "title": "Frozen"
        },
        "always_changed": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Assume stage as always changed",
          "title": "Always Changed"
        },
        "vars": {
          "oneOf": [
            {
              "$ref": "#/$defs/Vars"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "List of stage-specific values for substitution.\n\nMay include any dict or a path to a params file.\n\nUse in the stage with the `${}` substitution expression."
        },
        "desc": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Description of the stage",
          "title": "Desc"
        },
        "meta": {
          "default": null,
          "description": "Additional information/metadata",
          "title": "Meta"
        },
        "matrix": {
          "additionalProperties": {
            "oneOf": [
              {
                "items": {},
                "type": "array"
              },
              {
                "type": "string"
              }
            ]
          },
          "description": "Generate stages based on combination of variables.\n\nThe variable can be a list of values, or a parametrized string referencing a list.",
          "title": "Matrix",
          "type": "object"
        }
      },
      "required": [
        "cmd",
        "matrix"
      ],
      "title": "Matrix",
      "type": "object"
    },
    "Out": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "additionalProperties": {
            "$ref": "#/$defs/OutFlags"
          },
          "type": "object"
        }
      ],
      "title": "Out"
    },
    "OutFlags": {
      "additionalProperties": false,
      "properties": {
        "cache": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": true,
          "description": "Cache output by DVC",
          "title": "Cache"
        },
        "persist": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Persist output between runs",
          "title": "Persist"
        },
        "checkpoint": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Indicate that the output is associated with in-code checkpoints",
          "title": "Checkpoint"
        },
        "desc": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "User description for the output",
          "title": "Description"
        },
        "type": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "User assigned type of the output",
          "title": "Type"
        },
        "labels": {
          "oneOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array",
              "uniqueItems": true
            },
            {
              "type": "null"
            }
          ],
          "description": "User assigned labels of the output",
          "title": "Labels"
        },
        "meta": {
          "oneOf": [
            {
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Custom metadata of the output.",
          "title": "Meta"
        },
        "remote": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Name of the remote to use for pushing/fetching",
          "title": "Remote"
        },
        "push": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": true,
          "description": "Whether the output should be pushed to remote during `dvc push`",
          "title": "Push"
        }
      },
      "title": "OutFlags",
      "type": "object"
    },
    "Outs": {
      "items": {
        "$ref": "#/$defs/Out"
      },
      "title": "Outs",
      "type": "array",
      "uniqueItems": true
    },
    "Param": {
      "oneOf": [
        {
          "$ref": "#/$defs/ParamKey"
        },
        {
          "$ref": "#/$defs/CustomParamFileKeys"
        },
        {
          "$ref": "#/$defs/EmptyParamFileKeys"
        }
      ],
      "title": "Param"
    },
    "ParamKey": {
      "title": "ParamKey",
      "type": "string"
    },
    "Params": {
      "items": {
        "$ref": "#/$defs/Param"
      },
      "title": "Params",
      "type": "array",
      "uniqueItems": true
    },
    "Plot": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "additionalProperties": {
            "$ref": "#/$defs/PlotFlags"
          },
          "type": "object"
        }
      ],
      "title": "Plot"
    },
    "PlotFlags": {
      "additionalProperties": false,
      "properties": {
        "cache": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": true,
          "description": "Cache output by DVC",
          "title": "Cache"
        },
        "persist": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Persist output between runs",
          "title": "Persist"
        },
        "checkpoint": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Indicate that the output is associated with in-code checkpoints",
          "title": "Checkpoint"
        },
        "desc": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "User description for the output",
          "title": "Description"
        },
        "type": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "User assigned type of the output",
          "title": "Type"
        },
        "labels": {
          "oneOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array",
              "uniqueItems": true
            },
            {
              "type": "null"
            }
          ],
          "description": "User assigned labels of the output",
          "title": "Labels"
        },
        "meta": {
          "oneOf": [
            {
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Custom metadata of the output.",
          "title": "Meta"
        },
        "remote": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Name of the remote to use for pushing/fetching",
          "title": "Remote"
        },
        "push": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": true,
          "description": "Whether the output should be pushed to remote during `dvc push`",
          "title": "Push"
        },
        "x": {
          "default": null,
          "description": "Default field name to use as x-axis data",
          "title": "X",
          "type": "string"
        },
        "y": {
          "default": null,
          "description": "Default field name to use as y-axis data",
          "title": "Y",
          "type": "string"
        },
        "x_label": {
          "default": null,
          "description": "Default label for the x-axis",
          "title": "X Label",
          "type": "string"
        },
        "y_label": {
          "default": null,
          "description": "Default label for the y-axis",
          "title": "Y Label",
          "type": "string"
        },
        "title": {
          "default": null,
          "description": "Default plot title",
          "title": "Title",
          "type": "string"
        },
        "header": {
          "default": false,
          "description": "Whether the target CSV or TSV has a header or not",
          "title": "Header",
          "type": "boolean"
        },
        "template": {
          "default": null,
          "description": "Default plot template",
          "title": "Template",
          "type": "string"
        }
      },
      "title": "PlotFlags",
      "type": "object"
    },
    "Plots": {
      "items": {
        "$ref": "#/$defs/Plot"
      },
      "title": "Plots",
      "type": "array",
      "uniqueItems": true
    },
    "Stage": {
      "additionalProperties": false,
      "description": "\n    A named stage of a pipeline.\n    ",
      "properties": {
        "cmd": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          ],
          "description": "(Required) Command to run (anything your system terminal can run).\n\nCan be a string or a list of commands.",
          "title": "Cmd"
        },
        "wdir": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Working directory for the cmd, relative to `dvc.yaml`",
          "title": "Wdir"
        },
        "deps": {
          "oneOf": [
            {
              "$ref": "#/$defs/Dependencies"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "List of the dependencies for the stage."
        },
        "params": {
          "oneOf": [
            {
              "$ref": "#/$defs/Params"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "List of dot-separated parameter dependency keys to track from `params.yaml`.\n\nMay contain other YAML/JSON/TOML/Python parameter file names, with a sub-list of the param names to track in them (leave empty to include all)."
        },
        "outs": {
          "oneOf": [
            {
              "$ref": "#/$defs/Outs"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "List of the outputs of the stage."
        },
        "metrics": {
          "oneOf": [
            {
              "$ref": "#/$defs/Outs"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "List of metrics of the stage written to JSON/TOML/YAML."
        },
        "plots": {
          "oneOf": [
            {
              "$ref": "#/$defs/Plots"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "List of plots of the stage for visualization.\n\nPlots may be written to JSON/YAML/CSV/TSV for data or JPEG/GIF/PNG for images."
        },
        "frozen": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Assume stage as unchanged",
          "title": "Frozen"
        },
        "always_changed": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "type": "null"
            }
          ],
          "default": false,
          "description": "Assume stage as always changed",
          "title": "Always Changed"
        },
        "vars": {
          "oneOf": [
            {
              "$ref": "#/$defs/Vars"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "List of stage-specific values for substitution.\n\nMay include any dict or a path to a params file.\n\nUse in the stage with the `${}` substitution expression."
        },
        "desc": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Description of the stage",
          "title": "Desc"
        },
        "meta": {
          "default": null,
          "description": "Additional information/metadata",
          "title": "Meta"
        }
      },
      "required": [
        "cmd"
      ],
      "title": "Stage",
      "type": "object"
    },
    "TopLevelArtifactFlags": {
      "additionalProperties": false,
      "properties": {
        "path": {
          "description": "Path to the artifact",
          "title": "Path",
          "type": "string"
        },
        "type": {
          "default": null,
          "description": "Type of the artifact",
          "title": "Type",
          "type": "string"
        },
        "desc": {
          "default": null,
          "description": "Description for the artifact",
          "title": "Desc",
          "type": "string"
        },
        "meta": {
          "default": null,
          "description": "Custom metadata for the artifact",
          "title": "Meta",
          "type": "object"
        },
        "labels": {
          "description": "Labels for the artifact",
          "items": {
            "type": "string"
          },
          "title": "Labels",
          "type": "array",
          "uniqueItems": true
        }
      },
      "required": [
        "path"
      ],
      "title": "TopLevelArtifactFlags",
      "type": "object"
    },
    "TopLevelArtifacts": {
      "additionalProperties": {
        "$ref": "#/$defs/TopLevelArtifactFlags"
      },
      "title": "TopLevelArtifacts",
      "type": "object"
    },
    "TopLevelPlotFlags": {
      "additionalProperties": false,
      "properties": {
        "x": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/$defs/X"
            }
          ],
          "default": null,
          "description": "A single column name, or a dictionary of data-source and column pair",
          "title": "X"
        },
        "y": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array",
              "uniqueItems": true
            },
            {
              "$ref": "#/$defs/Y"
            }
          ],
          "description": "A single column name, list of columns, or a dictionary of data-source and column pair",
          "title": "Y"
        },
        "x_label": {
          "default": null,
          "description": "Default label for the x-axis",
          "title": "X Label",
          "type": "string"
        },
        "y_label": {
          "default": null,
          "description": "Default label for the y-axis",
          "title": "Y Label",
          "type": "string"
        },
        "title": {
          "default": null,
          "description": "Default plot title",
          "title": "Title",
          "type": "string"
        },
        "template": {
          "default": "linear",
          "description": "Default plot template",
          "title": "Template",
          "type": "string"
        }
      },
      "title": "TopLevelPlotFlags",
      "type": "object"
    },
    "TopLevelPlots": {
      "additionalProperties": {
        "oneOf": [
          {
            "$ref": "#/$defs/TopLevelPlotFlags"
          },
          {
            "$ref": "#/$defs/EmptyTopLevelPlotFlags"
          }
        ]
      },
      "title": "TopLevelPlots",
      "type": "object"
    },
    "TopLevelPlotsList": {
      "items": {
        "oneOf": [
          {
            "type": "string"
          },
          {
            "$ref": "#/$defs/TopLevelPlots"
          }
        ]
      },
      "title": "TopLevelPlotsList",
      "type": "array"
    },
    "VarDecl": {
      "title": "VarDecl",
      "type": "object"
    },
    "VarPath": {
      "title": "VarPath",
      "type": "string"
    },
    "Vars": {
      "items": {
        "oneOf": [
          {
            "$ref": "#/$defs/VarPath"
          },
          {
            "$ref": "#/$defs/VarDecl"
          }
        ]
      },
      "title": "Vars",
      "type": "array"
    },
    "X": {
      "additionalProperties": {
        "type": "string"
      },
      "title": "X",
      "type": "object"
    },
    "Y": {
      "additionalProperties": {
        "oneOf": [
          {
            "type": "string"
          },
          {
            "items": {
              "type": "string"
            },
            "type": "array",
            "uniqueItems": true
          }
        ]
      },
      "title": "Y",
      "type": "object"
    }
  },
  "additionalProperties": false,
  "properties": {
    "vars": {
      "allOf": [
        {
          "$ref": "#/$defs/Vars"
        }
      ],
      "description": "List of values for substitution.\n\nMay include any dict or a path to a params file which may be a string or a dict to params in the file).\n\nUse elsewhere in `dvc.yaml` with the `${}` substitution expression.",
      "title": "Variables"
    },
    "stages": {
      "additionalProperties": {
        "oneOf": [
          {
            "$ref": "#/$defs/ForeachDo"
          },
          {
            "$ref": "#/$defs/Matrix"
          },
          {
            "$ref": "#/$defs/Stage"
          }
        ]
      },
      "description": "List of stages that form a pipeline.",
      "title": "Stages",
      "type": "object"
    },
    "plots": {
      "oneOf": [
        {
          "$ref": "#/$defs/TopLevelPlots"
        },
        {
          "$ref": "#/$defs/TopLevelPlotsList"
        }
      ],
      "description": "Top level plots definition.",
      "title": "Plots"
    },
    "params": {
      "description": "List of parameter files",
      "items": {
        "type": "string"
      },
      "title": "Params",
      "type": "array",
      "uniqueItems": true
    },
    "metrics": {
      "description": "List of metric files",
      "items": {
        "type": "string"
      },
      "title": "Metrics",
      "type": "array",
      "uniqueItems": true
    },
    "artifacts": {
      "allOf": [
        {
          "$ref": "#/$defs/TopLevelArtifacts"
        }
      ],
      "description": "Top level artifacts definition."
    }
  },
  "title": "dvc.yaml",
  "type": "object"
}
